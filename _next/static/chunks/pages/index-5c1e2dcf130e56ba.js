(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5940)}])},5940:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Le}});var n=t(5893),o=t(4051),i=t.n(o),a=t(8100),s=t(5604),l=t(2114),c=t(7294),u=t(1163),d=t(2174),h=t.n(d),f=t(1522),y=t(6867),p=t(9199),v=t(1181),x=t(8129);function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function g(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){return e.every((function(e){return"number"===typeof e}))?"array(numbers)":e.every((function(e){return"string"===typeof e}))?"array(strings)":"array"}var b=(0,c.createContext)(new Map);function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return S(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(){var e=(0,c.useContext)(b),r=[],t=!0,o=!1,i=void 0;try{for(var a,s=Array.from(e)[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=w(a.value,2),u=l[0],d=l[1];r.push({name:u,type:d})}}catch(h){o=!0,i=h}finally{try{t||null==s.return||s.return()}finally{if(o)throw i}}return r.sort((function(e,r){return e.name.localeCompare(r.name)})),(0,n.jsxs)("div",{children:[(0,n.jsx)(y.W,{style:{margin:40},children:(0,n.jsxs)(p.X,{padding:"md",shadow:"sm",withBorder:!0,children:[(0,n.jsx)(v.D,{order:4,children:"Possible keys"}),(0,n.jsxs)(x.i,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Type"})]})}),(0,n.jsx)("tbody",{children:r.map((function(e){var r=e.name,t=e.type;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("code",{children:r})}),(0,n.jsx)("td",{children:t})]},r)}))})]})]})}),(0,n.jsx)(y.W,{style:{margin:40},children:(0,n.jsxs)(p.X,{padding:"md",shadow:"sm",withBorder:!0,children:[(0,n.jsx)(v.D,{order:4,children:"SQL is case-insensitive, but keys aren't"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("code",{children:"SELECT title FROM ? ORDER BY textLength LIMIT 10"}),(0,n.jsx)("br",{}),(0,n.jsx)("b",{style:{paddingLeft:170},children:"=="}),(0,n.jsx)("br",{}),(0,n.jsx)("code",{children:"Select title from ? order bY textLength limiT 10"})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"But..."}),(0,n.jsx)("br",{}),(0,n.jsx)("code",{children:"SELECT title FROM ? ORDER BY textLength LIMIT 10"}),(0,n.jsx)("br",{}),(0,n.jsx)("b",{style:{paddingLeft:170,color:"red"},children:"!="}),(0,n.jsx)("br",{}),(0,n.jsx)("code",{children:"SELECT TiTLe FROM ? ORDER BY TextlengTH LIMIT 10"})]})]})}),(0,n.jsx)(y.W,{style:{margin:40},children:(0,n.jsxs)(p.X,{padding:"md",shadow:"sm",withBorder:!0,children:[(0,n.jsx)(v.D,{order:4,children:"Read the docs"}),(0,n.jsxs)("p",{children:["The most important documentation is"," ",(0,n.jsx)("a",{href:"https://github.com/agershun/alasql/wiki",target:"_blank",rel:"noreferrer",children:"AlaSQL"})," ","which is what the SQL engine is based on."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"Tip!"})," Since AlaSQL is based on JavaScript you can substitute the ",(0,n.jsx)("code",{children:"."}),"for ",(0,n.jsx)("code",{children:"->"}),". For example, in JavaScript you would do:"," ",(0,n.jsx)("code",{children:"myString.length.toLocaleString()"}),", and in AlaSQL that becomes ",(0,n.jsx)("code",{children:"SELECT mystring->length->toLocaleString()"}),"."]})]})})]})}var _=t(3131),L=t(8852),C=t(5477),k=t(8612),O=t.n(k),T=t(1114),q=t.n(T);t(1004);function Q(e){var r=e.code;return(0,n.jsx)(O(),{language:"sql",value:r})}O().registerLanguage(q());var A=t(2138),R=t.n(A);function M(e){var r=e.savedQueries,t=e.loadQuery,o=e.deleteSavedQuery,i=e.starQuery,a=e.deleteAllSavedQueries;return(0,n.jsxs)("div",{style:{marginTop:50},children:[(0,n.jsx)(v.D,{order:4,children:"Saved queries"}),r.map((function(e){var r=Boolean(e.star);return(0,n.jsxs)("div",{className:R().saved_query,children:[(0,n.jsxs)("p",{children:["Found ",(0,n.jsxs)("b",{children:[e.count.toLocaleString()," records"]})," ",new Date(e.ts).toLocaleTimeString()]}),(0,n.jsx)(Q,{code:e.query}),(0,n.jsxs)(_.Z,{children:[(0,n.jsx)(L.z,{type:"button",color:"green",onClick:function(){t(e.query)},children:"Load"}),(0,n.jsx)(L.z,{title:"Don't let it drop off",onClick:function(){i(e.query)},children:(0,n.jsx)(C.Ux,{filled:r,primaryColor:r?"yellow":"white"})}),(0,n.jsx)(L.z,{type:"button",color:"red",title:"Delete saved query",onClick:function(){o(e.query)},children:"Delete"})]})]},e.query+e.count+e.ts)})),r.length>1&&(0,n.jsxs)(_.Z,{style:{marginTop:50},children:[(0,n.jsx)(L.z,{type:"button",variant:"outline",color:"red",title:"Click to delete all saved queries except those starred",onClick:function(){a()},children:"Delete un-starred saved queries"}),(0,n.jsx)(L.z,{type:"button",variant:"outline",color:"red",title:"Click to delete ALL saved queries",onClick:function(){a(!0)},children:"Delete ALL saved queries"})]})]})}var N=t(5528),I=t(8233),F=t(2790),D=t(9770),B=t.n(D),z=[{sql:"SELECT title FROM ?",description:"Select just 'title'"},{sql:"SELECT title FROM ? LIMIT 10 OFFSET 10",description:"Select first rows 10 to 20 "},{sql:"SELECT title, length(title) FROM ? ORDER BY 2 DESC LIMIT 5",description:"Top 5 longest titles"},{sql:"SELECT title, title->length as length FROM ? ORDER BY 2 ASC LIMIT 5",description:"Top 5 shortest titles"},{sql:'SELECT topics, topics->length AS count FROM ? WHERE "Accounts" IN topics',description:"Filter by presence inside an array and count entries in array"},{sql:'SELECT title FROM ? WHERE title ILIKE "%github%"',description:"Case insensitive filter by wildcard operator on string"},{sql:"SELECT changelog, changelog->label FROM ? WHERE changelog AND changelog->label",description:"Select from JSON object and filter by those that have a truthy value on that key"},{sql:"SELECT topics, topics->length FROM ? WHERE topics->label",description:"Select arrays and filter out those that are null"},{sql:"SELECT children->(0) FROM ? WHERE children->length",description:"Select first element in array where the array is something"},{sql:"SELECT changelog FROM ? WHERE NOT changelog->label",description:"Select from JSON objects those that do not have a certain key"},{sql:"SELECT title FROM ? ORDER BY RANDOM() LIMIT 10",description:"10 random titles"},{sql:"SELECT _id, wordCount, textLength, ROUND(textLength / wordCount, 2) FROM ? WHERE wordCount > 10 ORDER BY 4 DESC LIMIT 25",description:"Order average longest words rounded to 2 significant figures"}];function U(e){var r=e.loadQuery,t=(0,c.useState)(""),o=t[0],i=t[1],a=z.filter((function(e){var r=e.sql,t=e.description;return!o.trim()||(r.toLowerCase().includes(o.toLowerCase())||t.toLowerCase().includes(o.toLowerCase()))}));return(0,n.jsxs)("div",{children:[(0,n.jsxs)(N.r,{children:[(0,n.jsx)(N.r.Col,{span:6,children:(0,n.jsx)("form",{children:(0,n.jsx)(I.o,{type:"search",value:o,onChange:function(e){return i(e.target.value)},placeholder:"Search..."})})}),(0,n.jsx)(N.r.Col,{span:6,children:(0,n.jsx)("p",{children:(0,n.jsxs)("small",{children:["These are static examples they might not work with ",(0,n.jsx)("i",{children:"your"})," ","data."]})})})]}),a.map((function(e,t){var i=e.sql,a=e.description;return(0,n.jsxs)("div",{className:B().example,children:[(0,n.jsx)(F.y,{highlight:o.split(/\s+/),children:a}),(0,n.jsx)(Q,{code:i})," ",(0,n.jsx)(L.z,{size:"xs",color:"success",type:"button",onClick:function(){r(i)},children:"Load SQL"})]},t)})),0===a.length&&(0,n.jsx)("p",{children:(0,n.jsx)("i",{children:"No examples found"})})]})}function P(e){var r=e.currentMenu,t=e.toggleMenu,o=e.savedQueries,i=e.loadQuery,a=e.deleteSavedQuery,s=e.starQuery,l=e.deleteAllSavedQueries;return(0,n.jsxs)(f.x,{children:["help"===r&&(0,n.jsx)(E,{}),"saved"===r&&(0,n.jsx)(M,{savedQueries:o,loadQuery:function(e){i(e),t("")},deleteSavedQuery:function(e){a(e)},starQuery:s,deleteAllSavedQueries:l}),"examples"===r&&(0,n.jsx)(U,{loadQuery:function(e){i(e),t("")}})]})}var W=t(5716),J=t.n(W);function Y(e){var r=e.records;return(0,n.jsxs)(_.Z,{style:{marginTop:50},children:[(0,n.jsx)(L.z,{type:"button",variant:"outline",title:"Click to start downloading as a .json file",onClick:function(){!function(){var e=new Blob([JSON.stringify(r,void 0,2)],{type:"application/json"}),t=document.createElement("a");document.body.appendChild(t),t.setAttribute("href",window.URL.createObjectURL(e)),t.setAttribute("download","results.json"),t.style.display="none",t.click(),document.body.removeChild(t)}()},children:"Download as JSON"}),(0,n.jsx)(L.z,{type:"button",variant:"outline",title:"Click to start downloading as a .csv file",onClick:function(){!function(){var e="",t=null;r.forEach((function(r,n){n||(t=Object.keys(r),e+=t.map((function(e){return H(e)})),e+="\n"),e+=null===t||void 0===t?void 0:t.map((function(e){return H(r[e])})),e+="\n"}));var n=new Blob([e],{type:"text/csv"}),o=document.createElement("a");document.body.appendChild(o),o.setAttribute("href",window.URL.createObjectURL(n)),o.setAttribute("download","results.csv"),o.style.display="none",o.click(),document.body.removeChild(o)}()},children:"Download as CSV"})]})}function H(e){return(e=(e=null===e?"null":void 0===e?"":Array.isArray(e)||"object"===typeof e?JSON.stringify(e):e.toString()).replace(/"/g,'""')).search(/("|,|\n)/g)>=0?'"'.concat(e,'"'):e}function X(e,r,t,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void t(c)}s.done?r(l):Promise.resolve(l).then(n,o)}function Z(e){var r=e.records,t=(0,c.useState)(!1),o=t[0],s=t[1];(0,c.useEffect)((function(){var e=document.location.hostname;"localhost"!==e&&"127.0.0.1"!==e&&"0.0.0.0"!==e||s(!0)}),[]);var l=(0,c.useState)(null),u=l[0],d=l[1];(0,c.useEffect)((function(){var e=u?setTimeout((function(){d(null)}),3e3):null;return function(){e&&clearTimeout(e)}}),[u]);var h=u?"/api/open?"+new URLSearchParams({filePath:u}):null,f=(0,a.ZP)(h,function(){var e,r=(e=i().mark((function e(r){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r);case 2:if(404!==(t=e.sent).status&&400!==t.status){e.next=10;break}return e.next=6,t.json();case 6:throw n=e.sent.error,new Error(n);case 10:if(200!==t.status){e.next=14;break}return e.next=13,t.json();case 13:return e.abrupt("return",e.sent);case 14:throw new Error("".concat(t.status," on ").concat(r));case 15:case"end":return e.stop()}}),e)})),function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function a(e){X(i,n,o,a,s,"next",e)}function s(e){X(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),{revalidateOnFocus:!1,revalidateOnReconnect:!1}),y=f.data,p=f.error;if(0===r.length)return(0,n.jsx)("p",{children:"Absolutely diddly squat found. Sorry not sorry \ud83d\ude43"});var v=Object.keys(r[0]),m=v.join(""),g=1e3;return(0,n.jsxs)("div",{children:[u&&(0,n.jsxs)("p",{className:J().opening,children:["opening ",(0,n.jsx)("code",{children:u})]}),y&&(0,n.jsxs)("p",{className:J().opened,children:["tried to open ",(0,n.jsx)("code",{children:y.filePath}),"using ",(0,n.jsx)("code",{children:y.binary}),y.isTerminalEditor&&"(is terminal editor)"]}),p&&(0,n.jsxs)("p",{className:J().opened,children:["an error occurred trying to open the file:"," ",(0,n.jsx)("code",{children:p.toString()})]}),(0,n.jsxs)("p",{children:["Found ",r.length.toLocaleString()," ",r.length>g?"(only showing first ".concat(g.toLocaleString(),")"):null]}),(0,n.jsxs)(x.i,{className:J().found_records,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"\xa0"}),v.map((function(e){return(0,n.jsx)("th",{children:e},e)}))]})}),(0,n.jsx)("tbody",{children:r.slice(0,g).map((function(e,r){return(0,n.jsxs)("tr",{id:"l".concat(r+1),className:J().row,children:[(0,n.jsx)("td",{className:J().row_number,children:(0,n.jsx)("a",{href:"#l".concat(r+1),children:r+1})}),v.map((function(r){var t=e[r];return(0,n.jsx)("td",{children:(0,n.jsx)(G,{key_:r,value:t,allowLocalLinks:o,setOpening:function(e){d(e)}})},r)}))]},"".concat(m).concat(r))}))})]}),r.length>0&&(0,n.jsx)(Y,{records:r}),r.length>g&&(0,n.jsx)("p",{children:(0,n.jsxs)("small",{children:["Capped to the first ",(0,n.jsxs)("b",{children:[g.toLocaleString()," rows"]})]})})]})}function G(e){var r=e.key_,t=e.value,o=e.allowLocalLinks,i=e.setOpening;return r.endsWith("_url")&&"string"===typeof t?(0,n.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:t}):"_file"===r?o?(0,n.jsx)("a",{href:"#".concat(t),onClick:function(e){e.preventDefault(),i(t)},children:(0,n.jsx)(K,{value:t})}):(0,n.jsx)(K,{value:t}):(0,n.jsx)(n.Fragment,{children:$(t)})}function K(e){var r=e.value,t=e.maxLength,o=void 0===t?100:t;if(r.length>o){for(var i=Math.floor(r.length/2),a=r.slice(0,i),s=r.slice(i),l=1;a.length+s.length>o;)a=r.slice(0,i-l),s=r.slice(i+l),l++;return(0,n.jsxs)("abbr",{title:r,children:[a,"[\u2026]",s]})}return(0,n.jsx)("span",{children:r})}function $(e){return"string"===typeof e?e:0===e?"0":"number"===typeof e&&e>1e3?e.toLocaleString():null===e?"null":Array.isArray(e)||"object"===typeof e?JSON.stringify(e):void 0===e?(0,n.jsx)("span",{className:J().undefined_value,children:"undefined"}):e.toString()}var V=t(5554),ee=t.n(V);function re(e){var r=e.meta,t=(0,c.useState)(!1),o=t[0],i=t[1];return(0,n.jsx)("footer",{className:ee().footer,children:0===r.rows?(0,n.jsx)(s.b,{color:"red",title:"Loading problem",children:"No rows loaded! Something is wrong with the sources or the crawler."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["It took ",te(r.took)," to load"," ",r.rows.toLocaleString()," records."," ",(0,n.jsxs)("a",{href:"#more",className:ee().more_meta,onClick:function(e){e.preventDefault(),i((function(e){return!e}))},children:["[",o?"less":"more","]"]})]}),o&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,n.jsx)("b",{children:"Sources"})}),(0,n.jsx)("ul",{children:r.sources.map((function(e){return(0,n.jsxs)("li",{children:[e.files.toLocaleString()," files from"," ",(0,n.jsx)("i",{children:e.source})]},e.source)}))})]})]})})}function te(e){return e>1e3?"".concat((e/1e3).toFixed(2),"s"):"".concat(e.toFixed(0),"ms")}var ne=t(112),oe=t(7539),ie=t(6525),ae=t(2045),se=t.n(ae);function le(e){var r=e.current,t=e.toggle,o=e.savedQueries;return(0,n.jsxs)(_.Z,{children:[(0,n.jsx)(L.z,{type:"button",onClick:function(){return t("help")},variant:"help"===r?"filled":"outline",children:"help"===r?"Close help":"Open help"}),(0,n.jsx)(L.z,{type:"button",onClick:function(){return t("saved")},variant:"saved"===r?"filled":"outline",children:"saved"===r?"Close saved queries":"Open saved queries (".concat(o.length,")")}),(0,n.jsx)(L.z,{type:"button",onClick:function(){return t("examples")},variant:"examples"===r?"filled":"outline",children:"examples"===r?"Close example queries":"Open example queries"})]})}function ce(e){var r=e.onChange,t=e.query,o=e.prettyQuery,i=e.typedQuery,a=e.setTypedQuery,s=e.hasError,l=e.savedQueries,u=e.currentMenu,d=e.toggleMenu,h=(0,c.useCallback)((function(){r(i.trim())}),[i]),f=(0,c.useRef)(null),y=f.current;return(0,c.useEffect)((function(){var e=function(e){"Enter"===e.key&&e.metaKey&&h()};return y&&y.addEventListener("keydown",e),function(){y&&y.removeEventListener("keydown",e)}}),[y,h]),(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h()},children:[(0,n.jsxs)(ne.x,{size:"sm",align:"right",children:[(0,n.jsx)("b",{children:"Tip!"})," Use ",(0,n.jsx)(ie.T,{children:"\u2318"}),"-",(0,n.jsx)(ie.T,{children:"Enter"})," to run the query when focus is inside textarea"]}),(0,n.jsx)(oe.g,{className:se().textarea,spellCheck:"false",autoFocus:!0,error:s?"Query has error":void 0,required:!0,rows:Math.min(100,Math.max(4,i.split("\n").length)),size:"md",ref:f,value:i,onChange:function(e){a(e.target.value)},autoCorrect:"off",children:t}),(0,n.jsxs)(N.r,{children:[(0,n.jsxs)(N.r.Col,{span:6,children:[(0,n.jsx)(L.z,{type:"submit",disabled:i.trim()===t,color:i.trim()!==t?"green":s?"red":void 0,children:"Run"})," ",(0,n.jsx)(L.z,{type:"button",variant:"outline",disabled:!o||o===i,onClick:function(){a(o),r(o)},children:"Pretty format"})]}),(0,n.jsx)(N.r.Col,{span:6,children:(0,n.jsx)(le,{toggle:d,current:u,savedQueries:l})})]})]})}function ue(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function de(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}}(e,r)||fe(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,r){if(e){if("string"===typeof e)return ue(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ue(e,r):void 0}}function ye(e){var r,t=e.data,o=(0,u.useRouter)(),i=(r=o.query.query||"",Array.isArray(r)?r[0]:r),a=(0,c.useState)(null),l=a[0],d=a[1],f=(0,c.useState)(null),y=f[0],p=f[1],v=(0,c.useState)(i),x=v[0],m=v[1],S=t.pages,w=function(){var e=(0,u.useRouter)(),r=(0,c.useRef)(e);return r.current=e,(0,c.useState)({replace:function(e){return r.current.replace(e)}})[0].replace}();(0,c.useEffect)((function(){if(x)try{d(h()(x,[S])),p(null)}catch(t){if(e=t,!(null!=(r=Error)&&"undefined"!==typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r))throw t;p(t)}var e,r}),[x,S]);var E=(0,c.useState)(""),_=E[0],L=E[1];(0,c.useEffect)((function(){if(x)try{var e=function(e){var r=new Set,t=!0,n=!1,o=void 0;try{for(var i,a=(e.match(/\sAS \w+/g)||[])[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;r.has(s)&&(e=e.replace(s,"")),r.add(s)}}catch(l){n=!0,o=l}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}return e}(h().parse(x).toString().replace("FROM $0 AS default","FROM ?"));e!==x&&L(e)}catch(r){L("")}}),[x]);var C=o.asPath;(0,c.useEffect)((function(){var e=de(C.split("?"),2),r=e[0],t=e[1],n=new URLSearchParams(void 0===t?"":t);x?n.set("query",x):n.delete("query");var o=r;n.toString()&&(o+="?".concat(n.toString())),o!==C&&w(o)}),[x,C,w]);var k=(0,c.useState)([]),O=k[0],T=k[1];(0,c.useEffect)((function(){var e=localStorage;try{var r=JSON.parse(e.getItem("saved_queries")||"[]");Array.isArray(r)||(r=[]),T(r)}catch(t){console.warn("Unable to save to local storage",t)}}),[]),(0,c.useEffect)((function(){i||(O.length?m(O[0].query):m("SELECT title, length(title) AS length FROM ? ORDER BY 2 DESC LIMIT 10"))}),[i,O]),(0,c.useEffect)((function(){var e=localStorage;try{e.setItem("saved_queries",JSON.stringify(O.sort((function(e,r){return Number(Boolean(r.star))-Number(Boolean(e.star))}))))}catch(r){console.warn("Unable to save to local storage",r)}}),[O]),(0,c.useEffect)((function(){y?T((function(e){return e.filter((function(e){return e.query!=x}))})):l&&T((function(e){if(e.length>0&&e[0].query===x&&e[0].count===l.length)return e;var r=[];return e.forEach((function(e,t){e.query!==x&&(t>50&&!e.star||r.push(e))})),[{query:x,count:l.length,ts:(new Date).getTime()}].concat(he(r))}))}),[x,l,y]);var q=(0,c.useState)(""),Q=q[0],A=q[1],R=function(e){var r,t=new Map,n=0,o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,u=!0,d=!1,h=void 0;try{for(var f,y=Object.entries(c)[Symbol.iterator]();!(u=(f=y.next()).done);u=!0){var p=g(f.value,2),v=p[0],x=p[1];if(!t.has(v)){var m="unknown";"boolean"===typeof x?m="boolean":"number"===typeof x?m="number":"string"===typeof x?m="string":Array.isArray(x)?m=j(x):"object"===typeof x?m="json":console.warn("Unknown type of value:",{name:v,value:x},"undefined"===typeof x?"undefined":(r=x)&&"undefined"!==typeof Symbol&&r.constructor===Symbol?"symbol":typeof r),t.set(v,m)}}}catch(b){d=!0,h=b}finally{try{u||null==y.return||y.return()}finally{if(d)throw h}}if(++n>=100)break}}catch(b){i=!0,a=b}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return t}(t.pages);return(0,n.jsxs)("div",{children:[y&&(0,n.jsx)(s.b,{title:"Query error",color:"red",radius:"md",children:(0,n.jsx)("code",{children:y.toString()})}),(0,n.jsx)(b.Provider,{value:R,children:(0,n.jsx)(pe,{query:x,setQuery:m,prettyQuery:_,queryError:y,savedQueries:O,deleteSavedQuery:function(e){T((function(r){return he(r.filter((function(r){return r.query!==e})))}))},starQuery:function(e){T((function(r){return he(r.map((function(r){return r.query===e?Object.assign({},r,{star:!Boolean(r.star)}):Object.assign({},r)})))}))},currentMenu:Q,toggleMenu:function(e){A((function(r){return r===e?"":e}))},deleteAllSavedQueries:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];T((function(r){return r.filter((function(r){return!e&&r.star}))}))}})}),null!==l&&""===Q&&(0,n.jsx)(Z,{records:l}),(0,n.jsx)(re,{meta:t.meta})]})}function pe(e){var r=e.query,t=e.setQuery,o=e.prettyQuery,i=e.queryError,a=e.savedQueries,s=e.deleteSavedQuery,l=e.starQuery,u=e.currentMenu,d=e.toggleMenu,h=e.deleteAllSavedQueries,f=(0,c.useState)(""),y=f[0],p=f[1];return(0,c.useEffect)((function(){r&&p(r)}),[r]),(0,n.jsxs)("div",{children:[(0,n.jsx)(ce,{query:r,typedQuery:y,prettyQuery:o,setTypedQuery:p,onChange:function(e){t(e.trim()),d("")},hasError:Boolean(i),savedQueries:a,currentMenu:u,toggleMenu:d}),(0,n.jsx)(P,{currentMenu:u,toggleMenu:d,savedQueries:a,loadQuery:function(e){p(e),t(e.trim())},deleteSavedQuery:function(e){s(e),y===e&&p("")},starQuery:l,deleteAllSavedQueries:h})]})}var ve=t(6972);t(6403);function xe(){var e=(0,ve.X)();e.colorScheme,e.toggleColorScheme;return null}var me="This is just a demo!";function ge(){var e=(0,c.useState)(Boolean(me)),r=e[0],t=e[1];return r?(0,n.jsx)(s.b,{withCloseButton:!0,closeButtonLabel:"Close alert",title:me,color:"pink",radius:"lg",style:{margin:20},onClose:function(){t(!1)},children:(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:'With <b>docsQL</b>, you&apos;re supposed to run it with your ownprojects Markdown files. What you&apos;re seeing here is just a sample instance that uses a sample of content from the <a href="https://github.com/github/docs" target="_blank" rel="noreferrer">GitHub Docs project</a>.'}})}):null}var je=t(1521);function be(){var e=(0,ve.X)(),r=e.colorScheme,t=e.toggleColorScheme,o="dark"===r;return(0,n.jsx)(L.z,{variant:"subtle",leftIcon:o?(0,n.jsx)(je.NWY,{}):(0,n.jsx)(je.kLh,{}),onClick:function(){return t()},style:{position:"absolute",top:3,right:3},children:o?"Make it bright":"Go dark"})}var Se=t(8669),we=t.n(Se);function Ee(e,r,t,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void t(c)}s.done?r(l):Promise.resolve(l).then(n,o)}var _e=function(){var e=(0,a.ZP)("docs.json",function(){var e,r=(e=i().mark((function e(r){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r);case 2:if(!(t=e.sent).ok){e.next=7;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:return n="".concat(t.status," on ").concat(r),e.prev=8,e.next=11,t.json();case 11:n=e.sent.error,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:throw new Error(n);case 17:case"end":return e.stop()}}),e,null,[[8,14]])})),function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function a(e){Ee(i,n,o,a,s,"next",e)}function s(e){Ee(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),{revalidateOnFocus:!1}),r=e.data,t=e.error;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ge,{}),(0,n.jsxs)("div",{className:we().container,children:[(0,n.jsx)("h1",{className:we().heading,children:"docsQL"}),(0,n.jsx)(be,{}),(0,n.jsxs)("main",{className:we().main,children:[t&&(0,n.jsx)(s.b,{color:"red",title:"Loading error",children:(0,n.jsxs)("div",{className:r?we().reloading_error:we().loading_error,children:[(0,n.jsx)("code",{children:t.toString()}),r&&(0,n.jsx)("p",{children:'Showing "old" data.'})]})}),(0,n.jsx)(l.f,{visible:!t&&!r,transitionDuration:500}),r&&(0,n.jsx)(ye,{data:r})]}),(0,n.jsx)("footer",{className:we().footer,children:(0,n.jsx)(xe,{})})]})]})},Le=function(){return(0,n.jsx)(_e,{})}},5554:function(e){e.exports={footer:"about-metadata_footer__yf04u",more_meta:"about-metadata_more_meta__tJLZu"}},2045:function(e){e.exports={textarea:"code-input_textarea__IpE6U"}},9770:function(e){e.exports={example:"example-queries_example__fsbGt"}},5716:function(e){e.exports={row:"found-records_row__KYyBT",row_number:"found-records_row_number__nd4q0",undefined_value:"found-records_undefined_value__BQGz3",opening:"found-records_opening__nhkDC",opened:"found-records_opened__QbiNq",found_records:"found-records_found_records__bmg8f"}},8669:function(e){e.exports={container:"home_container__GJ1Uu",main:"home_main__6Pj0X",footer:"home_footer__L9Olw",loading_error:"home_loading_error__MeQiF",reloading_error:"home_reloading_error__4v2Kk",heading:"home_heading__FV4U6"}},2138:function(e){e.exports={saved_query:"saved-queries_saved_query__Me2bK"}}},function(e){e.O(0,[111,616,297,967,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);